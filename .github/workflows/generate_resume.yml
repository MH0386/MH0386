name: Generate Resume
on: [push]
jobs:
    build_typst:
        runs-on: ubuntu-latest
        steps:
            - name: Set up Git repository
              uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2
            - name: Setup Typst
              uses: typst-community/setup-typst@13c527d2e8ac7863a24510c4043ad28fd47a5606 # v4.1.0
              with:
                cache-dependency-path: requirements.typ
            - run: typst compile resume.typ resume.pdf
            - name: Create Release
              uses: softprops/action-gh-release@72f2c25fcb47643c292f7107632f7a47c1df5cd8 # v2
              with:
                files: resume.pdf
                generate_release_notes: true
                make_latest: true
                tag_name: ${{ github.run_number }}
            - name: Commit and Push new file
              run: |
                  git config user.name MH0386          
                  git config user.email mohamed.hisham.abdelzaher@gmail.com         
                  git add resume.pdf        
                  git commit -m "Update Resume" 
                  git pull          
                  git push
              continue-on-error: true
      